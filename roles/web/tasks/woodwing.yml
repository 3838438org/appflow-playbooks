---

# file: playbooks/roles/web/tasks/woodwing.yml

- name: check if ioncube_loader_so is installed
  stat: "path={{ conf_php_extension_dir }}/{{ conf_php_ioncube_loader_so }}"
  register: ioncube_loader_so
  when: conf_woodwing_enable is defined and conf_woodwing_enable == true
  tags: [ woodwing, ioncube_loader, php ]

- debug: var=ioncube_loader_so
  when: conf_woodwing_enable is defined and conf_woodwing_enable == true
  tags: [ woodwing, ioncube_loader, php ]

- name: download ioncube_loader_so
  get_url:
    url: http://downloads.woodwing.net/ioncube-loaders/enterprise-server/ioncube-loader-5014.zip
    dest: /tmp/ioncube-loader-5014.zip
    mode: 0644
  when: not ioncube_loader_so.stat.exists
  tags: [ woodwing, ioncube_loader, php ]
